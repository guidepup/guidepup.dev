"use strict";(self.webpackChunk_guidepup_guidepup_dev=self.webpackChunk_guidepup_guidepup_dev||[]).push([[5899],{3819:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>c,toc:()=>d});var n=i(4848),o=i(8453),s=i(1470),r=i(9365);const a={title:"Manual VoiceOver Setup"},l=void 0,c={id:"guides/manual-voiceover-setup",title:"Manual VoiceOver Setup",description:"If @guidepup/setup cannot be used for your MacOS workflow, these guides instruct how to set up your MacOS environment manually for VoiceOver automation.",source:"@site/docs/guides/manual-voiceover-setup.md",sourceDirName:"guides",slug:"/guides/manual-voiceover-setup",permalink:"/docs/guides/manual-voiceover-setup",draft:!1,unlisted:!1,editUrl:"https://github.com/guidepup/guidepup.dev/tree/main/docs/guides/manual-voiceover-setup.md",tags:[],version:"current",frontMatter:{title:"Manual VoiceOver Setup"},sidebar:"docs",previous:{title:"Environment Setup",permalink:"/docs/guides/automated-environment-setup"}},u={},d=[{value:"Local Setup",id:"local-setup",level:2},{value:"Allow VoiceOver To Be Controlled",id:"allow-voiceover-to-be-controlled",level:3},{value:"Allow App Automation",id:"allow-app-automation",level:3},{value:"Additional System Permissions",id:"additional-system-permissions",level:3},{value:"CI Setup",id:"ci-setup",level:2},{value:"Allow VoiceOver To Be Controlled",id:"allow-voiceover-to-be-controlled-1",level:3},{value:"VoiceOver Database File",id:"voiceover-database-file",level:4},{value:"System Preferences",id:"system-preferences",level:4},{value:"Allow App Automation",id:"allow-app-automation-1",level:3}];function p(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["If ",(0,n.jsx)(t.a,{href:"https://github.com/guidepup/setup",children:(0,n.jsx)(t.code,{children:"@guidepup/setup"})})," cannot be used for your MacOS workflow, these guides instruct how to set up your MacOS environment manually for VoiceOver automation."]}),"\n",(0,n.jsx)(t.h2,{id:"local-setup",children:"Local Setup"}),"\n",(0,n.jsx)(t.h3,{id:"allow-voiceover-to-be-controlled",children:"Allow VoiceOver To Be Controlled"}),"\n",(0,n.jsx)(t.p,{children:"This setup is required to allow VoiceOver to be controlled by Guidepup."}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:'Open the "VoiceOver Utility" application.'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"MacOS Spotlight search for &quot;VoiceOver Utility.app&quot;.",src:i(7583).A+"",width:"792",height:"542"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:'On the "General" tab, tick the checkbox "Allow VoiceOver to be controlled with AppleScript".'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"VoiceOver Utility General Tab highlighting the last form option: a ticked checkbox for &quot;Allow VoiceOver to be controlled with AppleScript&quot;.",src:i(5632).A+"",width:"942",height:"632"})}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"allow-app-automation",children:"Allow App Automation"}),"\n",(0,n.jsx)(t.p,{children:"This setup is required to allow applications, e.g. your terminal or IDE, to control other applications, i.e. VoiceOver:"}),"\n",(0,n.jsxs)(s.A,{groupId:"env-flavor",defaultValue:"12",values:[{label:"MacOS 12 - Monterey",value:"12"},{label:"MacOS 13 - Ventura",value:"13"}],children:[(0,n.jsx)(r.A,{value:"12",children:(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:'Open the "Security & Privacy" application within "System Preferences". Choose the "Privacy" tab.'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"System Preferences application with the Security &amp; Privacy icon button highlighted.",src:i(3072).A+"",width:"780",height:"791"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:'Select the "Accessibility" option and click on the padlock to unlock configuration. This will require you to enter an admin username and password.'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Security &amp; Privacy view of System Preferences with the Privacy tab open and the Accessibility option selected. The clickable padlock at the bottom of the application is highlighted.",src:i(568).A+"",width:"780",height:"699"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:'In the "Allow the apps below to control your computer." section, use the plus "+" button to add any application that you will run a Guidepup script from - this will likely be your preferred terminal or IDE. Ensure you have also ticked the checkbox next to each application that you will run a Guidepup script from.'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Security &amp; Privacy view of System Preferences with the Privacy tab open and the Accessibility option selected. The &quot;Allow the apps below to control your computer.&quot; section is highlighted, with two applications listed: Terminal.app and Visual Studio Code.app, both with their checkboxes ticked.",src:i(7313).A+"",width:"780",height:"699"})}),"\n"]}),"\n"]})}),(0,n.jsx)(r.A,{value:"13",children:(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:'Open the "Privacy & Security" pane within "System Settings".'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"System Settings application with the Privacy &amp; Security side menu selected.",src:i(8804).A+"",width:"1654",height:"1530"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:'Select the "Accessibility" option.'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Privacy &amp; Security view of System Settings with the Accessibility tab open.",src:i(4273).A+"",width:"1654",height:"1530"})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsx)(t.p,{children:'In the "Allow the applications below to control your computer." section, use the plus "+" button to add any application that you will run a Guidepup script from - this will likely be your preferred terminal or IDE. This will prompt you for an administrator password. Ensure you have also ticked the checkbox next to each application that you will run a Guidepup script from.'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Privacy &amp; Security view of System Settings with the Accessibility tab open. The plus &quot;+&quot; button below the &quot;Allow the applications below to control your computer.&quot; section is highlighted.",src:i(4307).A+"",width:"1654",height:"1530"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Privacy &amp; Security view of System Settings with the Accessibility tab open. The &quot;Allow the applications below to control your computer.&quot; section is highlighted, with two applications listed: Terminal.app and Visual Studio Code.app, both with their checkboxes ticked.",src:i(5483).A+"",width:"1654",height:"1530"})}),"\n"]}),"\n"]})})]}),"\n",(0,n.jsx)(t.h3,{id:"additional-system-permissions",children:"Additional System Permissions"}),"\n",(0,n.jsx)(t.p,{children:'Depending on how you use Guidepup you may require additional "Security & Privacy" updates with "System Preferences":'}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:'"Location Services"'}),"\n",(0,n.jsx)(t.li,{children:'"Microphone"'}),"\n",(0,n.jsx)(t.li,{children:'"Screen Recording"'}),"\n",(0,n.jsx)(t.li,{children:'"Bluetooth"'}),"\n",(0,n.jsx)(t.li,{children:'"Automation"'}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:'While using Guidepup if a system permission is required a dialog box will pop up automatically asking for the permission. Alternatively you can proactively set these permissions in the same way as the "Accessibility" settings were updated in the previous step.'}),"\n",(0,n.jsx)(t.h2,{id:"ci-setup",children:"CI Setup"}),"\n",(0,n.jsx)(t.h3,{id:"allow-voiceover-to-be-controlled-1",children:"Allow VoiceOver To Be Controlled"}),"\n",(0,n.jsx)(t.p,{children:"For VoiceOver to be controlled by AppleScript there is a database file and system preference default that need to be configured."}),"\n",(0,n.jsx)(t.h4,{id:"voiceover-database-file",children:"VoiceOver Database File"}),"\n",(0,n.jsxs)(t.p,{children:["To allow VoiceOver to be controlled by AppleScript the ",(0,n.jsx)(t.code,{children:"/private/var/db/Accessibility/.VoiceOverAppleScriptEnabled"})," file needs to exist and contain the character ",(0,n.jsx)(t.code,{children:"a"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"This file can be created manually by following the steps in the guide above, by automating the manual steps from the guide above, or by creating the database file using scripts, e.g.:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"# Create VoiceOver database file specifying automation is enabled\nsudo bash -c 'echo -n \"a\" > /private/var/db/Accessibility/.VoiceOverAppleScriptEnabled'\n"})}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"\u26a0\ufe0f Warning"})}),"\n",(0,n.jsxs)(t.p,{children:["For the ",(0,n.jsx)(t.code,{children:".VoiceOverAppleScriptEnabled"})," file to be created in this way you must first disable ",(0,n.jsx)(t.a,{href:"https://support.apple.com/en-gb/HT204899",children:"System Integrity Protection (SIP)"}),". This comes with ",(0,n.jsx)(t.strong,{children:"serious security implications"}),", so please first refer to the ",(0,n.jsx)(t.a,{href:"https://developer.apple.com/documentation/security/disabling_and_enabling_system_integrity_protection",children:"Apple documentation"})," for more details before taking any action. Consider whether you are able to use alternative manual setup steps for configuration before exploring this option further."]}),"\n",(0,n.jsx)(t.p,{children:"SIP does not need to remain disabled once this file has been created, and so should be re-enabled once the file has been created."}),"\n",(0,n.jsxs)(t.p,{children:["It is strongly advised that you use ",(0,n.jsx)(t.a,{href:"https://github.com/guidepup/setup",children:(0,n.jsx)(t.code,{children:"@guidepup/setup"})})," or the manual setup guide above for local development in preference to applying this step."]}),"\n"]}),"\n",(0,n.jsx)(t.h4,{id:"system-preferences",children:"System Preferences"}),"\n",(0,n.jsx)(t.p,{children:"In addition to the database file you will also need to set a system preference entry:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"# Update system preference defaults specifying automation is enabled\ndefaults write com.apple.VoiceOver4/default SCREnableAppleScript -bool true\n"})}),"\n",(0,n.jsx)(t.p,{children:"This value does not require any additional steps unlike the database file."}),"\n",(0,n.jsx)(t.h3,{id:"allow-app-automation-1",children:"Allow App Automation"}),"\n",(0,n.jsxs)(t.p,{children:["In order for applications (e.g. a CI terminal) to control other applications (e.g. VoiceOver) using AppleScript, updates need to be made to the ",(0,n.jsx)(t.code,{children:"TCC.db"}),"."]}),"\n",(0,n.jsxs)(t.p,{children:["Please refer to the following examples of how to update the ",(0,n.jsx)(t.code,{children:"TCC.db"})," for your desired application(s):"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://github.com/guidepup/setup/blob/main/src/macOS/updateTccDb.ts",children:"@guidepup/setup"})," - Guidepup ",(0,n.jsx)(t.code,{children:"TCC.db"})," setup"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://github.com/actions/virtual-environments/blob/main/images/macos/provision/configuration/configure-tccdb-macos11.sh",children:"actions/virtual-environments"})," - GitHub Actions ",(0,n.jsx)(t.code,{children:"TCC.db"})," setup"]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.a,{href:"https://github.com/CircleCI-Public/macos-orb/blob/main/src/commands/add-uitest-permissions.yml",children:"CircleCI-Public/macos-orb"})," - CircleCI MacOS Orb ",(0,n.jsx)(t.code,{children:"TCC.db"})," setup"]}),"\n"]}),"\n",(0,n.jsxs)(t.blockquote,{children:["\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"\u26a0\ufe0f Warning"})}),"\n",(0,n.jsxs)(t.p,{children:["For the system ",(0,n.jsx)(t.code,{children:"TCC.db"})," updates you must first disable ",(0,n.jsx)(t.a,{href:"https://support.apple.com/en-gb/HT204899",children:"System Integrity Protection (SIP)"}),". This comes with ",(0,n.jsx)(t.strong,{children:"serious security implications"}),", so please first refer to the ",(0,n.jsx)(t.a,{href:"https://developer.apple.com/documentation/security/disabling_and_enabling_system_integrity_protection",children:"Apple documentation"})," for more details before taking any action. Consider whether you are able to use alternative manual setup steps for configuration before exploring this option further."]}),"\n",(0,n.jsx)(t.p,{children:"SIP does not need to remain disabled once these updates have been made, and so should be re-enabled once the changes are completed."}),"\n",(0,n.jsxs)(t.p,{children:["It is strongly advised that you use ",(0,n.jsx)(t.a,{href:"https://github.com/guidepup/setup",children:(0,n.jsx)(t.code,{children:"@guidepup/setup"})})," or the manual setup guide above for local development in preference to applying this step."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}},9365:(e,t,i)=>{i.d(t,{A:()=>r});i(6540);var n=i(4164);const o={tabItem:"tabItem_Ymn6"};var s=i(4848);function r(e){let{children:t,hidden:i,className:r}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,n.A)(o.tabItem,r),hidden:i,children:t})}},1470:(e,t,i)=>{i.d(t,{A:()=>w});var n=i(6540),o=i(4164),s=i(3104),r=i(6347),a=i(205),l=i(7485),c=i(1682),u=i(9466);function d(e){return n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:t,children:i}=e;return(0,n.useMemo)((()=>{const e=t??function(e){return d(e).map((e=>{let{props:{value:t,label:i,attributes:n,default:o}}=e;return{value:t,label:i,attributes:n,default:o}}))}(i);return function(e){const t=(0,c.X)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,i])}function h(e){let{value:t,tabValues:i}=e;return i.some((e=>e.value===t))}function b(e){let{queryString:t=!1,groupId:i}=e;const o=(0,r.W6)(),s=function(e){let{queryString:t=!1,groupId:i}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!i)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return i??null}({queryString:t,groupId:i});return[(0,l.aZ)(s),(0,n.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(o.location.search);t.set(s,e),o.replace({...o.location,search:t.toString()})}),[s,o])]}function m(e){const{defaultValue:t,queryString:i=!1,groupId:o}=e,s=p(e),[r,l]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:i}=e;if(0===i.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:i}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${i.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=i.find((e=>e.default))??i[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:s}))),[c,d]=b({queryString:i,groupId:o}),[m,f]=function(e){let{groupId:t}=e;const i=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,s]=(0,u.Dv)(i);return[o,(0,n.useCallback)((e=>{i&&s.set(e)}),[i,s])]}({groupId:o}),g=(()=>{const e=c??m;return h({value:e,tabValues:s})?e:null})();(0,a.A)((()=>{g&&l(g)}),[g]);return{selectedValue:r,selectValue:(0,n.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),f(e)}),[d,f,s]),tabValues:s}}var f=i(2303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=i(4848);function y(e){let{className:t,block:i,selectedValue:n,selectValue:r,tabValues:a}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),u=e=>{const t=e.currentTarget,i=l.indexOf(t),o=a[i].value;o!==n&&(c(t),r(o))},d=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const i=l.indexOf(e.currentTarget)+1;t=l[i]??l[0];break}case"ArrowLeft":{const i=l.indexOf(e.currentTarget)-1;t=l[i]??l[l.length-1];break}}t?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":i},t),children:a.map((e=>{let{value:t,label:i,attributes:s}=e;return(0,v.jsx)("li",{role:"tab",tabIndex:n===t?0:-1,"aria-selected":n===t,ref:e=>l.push(e),onKeyDown:d,onClick:u,...s,className:(0,o.A)("tabs__item",g.tabItem,s?.className,{"tabs__item--active":n===t}),children:i??t},t)}))})}function x(e){let{lazy:t,children:i,selectedValue:o}=e;const s=(Array.isArray(i)?i:[i]).filter(Boolean);if(t){const e=s.find((e=>e.props.value===o));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:s.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==o})))})}function j(e){const t=m(e);return(0,v.jsxs)("div",{className:(0,o.A)("tabs-container",g.tabList),children:[(0,v.jsx)(y,{...e,...t}),(0,v.jsx)(x,{...e,...t})]})}function w(e){const t=(0,f.A)();return(0,v.jsx)(j,{...e,children:d(e.children)},String(t))}},4273:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/privacy_and_security_accessibility-ff482c171a0efb3a91a427f85598e19e.png"},4307:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/privacy_and_security_accessibility_add_highlighted-4905a586b7e74243a09e40419b0d6e6d.png"},5483:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/privacy_and_security_accessibility_applications-d03fd9d0fdf09808d96bb87d4673b383.png"},7313:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/security_and_privacy_accessibility_applications-98bade323c0deb47e9bc34cf4f1b499a.png"},568:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/security_and_privacy_accessibility_padlock-87300a2cd1bf244b7e65c6dbd78c4ee9.png"},3072:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/system_preferences_security_and_privacy_highlight-d9bc34e3a478ac93605a90fda49033b5.png"},8804:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/system_settings_privacy_and_security-bf29a4b11c0e948e355630ca18e78652.png"},5632:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/voiceover_utility_checkbox-f6f69a35134ecff0fdb135e8d5c172ce.png"},7583:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/voiceover_utility_spotlight-e190bd2b15e6b2e96752332c8820ef57.png"},8453:(e,t,i)=>{i.d(t,{R:()=>r,x:()=>a});var n=i(6540);const o={},s=n.createContext(o);function r(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);